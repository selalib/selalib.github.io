
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CMake</title>
    
  <link rel="stylesheet" href="_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.c441f2ba0852f4cabcb80105e3a46ae6.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Libraries" href="structure.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  <img src="_static/selalib.png" class="logo" alt="logo">
  
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <p class="caption collapsible-parent">
 <span class="caption-text">
  Mathematics
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="equations.html">
   Equations
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  User guide
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="build.html">
   Build the library
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="user_guide.html">
   Preamble
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="low_level.html">
   Basic Utilities
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mid_level.html">
   Numerical and Parallel Utilities
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="top_level.html">
   Semi-Lagrangian Toolbox
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pic.html">
   Particle-In-Cell
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Developer guide
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="getting_started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   CMake
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="structure.html">
   Libraries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="coding_style.html">
   Coding guidelines
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="naming_convention.html">
   Naming Convention
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="doxygen.html">
   Doxygen
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Credits
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="institutions.html">
   Institutions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="markdown.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="members.html">
   Contributors
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/cmake.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/selalib/selalib.github.io"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/selalib/selalib.github.io/issues/new?title=Issue%20on%20page%20%2Fcmake.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/selalib/selalib.github.io/edit/main/cmake.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


            <!-- Full screen (wrap in <a> to have style consistency -->
            <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                    data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                    title="Fullscreen mode"><i
                        class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i>
            Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#build-the-library-and-tests">
   Build the library and tests
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#build-automation">
   Build automation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-subdirectory">
   Add subdirectory
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-library">
   Add library
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-program">
   Add program
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-test">
   Add test
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#macro-for-parallel-jobs-is-available">
   Macro for parallel jobs is available
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-tests">
   Running Tests
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#selecting-compiler-and-linker-options">
   Selecting compiler and linker options
  </a>
 </li>
</ul>

        </nav>
        
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="cmake">
<h1>CMake<a class="headerlink" href="#cmake" title="Permalink to this headline">¶</a></h1>
<div class="section" id="build-the-library-and-tests">
<h2>Build the library and tests<a class="headerlink" href="#build-the-library-and-tests" title="Permalink to this headline">¶</a></h2>
<p>Full documentation is available on the CMake website <a class="footnote-reference brackets" href="#id2" id="id1">1</a>. CMake build
tool controls the software compilation process using compiler
independent configuration files. CMake generates native makefiles that
can be used in the compiler environment of your choice. To build the
library create the build directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake path_to_selalib
make
</pre></div>
</div>
<p>You can create a build directory from any location you would like. It
can be a sub-directory of the SeLaLib base source directory or anywhere
else.</p>
</div>
<div class="section" id="build-automation">
<h2>Build automation<a class="headerlink" href="#build-automation" title="Permalink to this headline">¶</a></h2>
<p>To use CMake add a file named CMakeLists.txt in your directory. With
cmake you can locate header files and libraries to include and link to
your program.</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">project</span><span class="p">(</span><span class="s">SeLaLib</span><span class="p">)</span>
<span class="nb">enable_language</span><span class="p">(</span><span class="s">Fortran</span><span class="p">)</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">2.8.12</span><span class="p">)</span>

<span class="nb">find_package</span><span class="p">(</span><span class="s">HDF5</span> <span class="s">Fortran}</span>
</pre></div>
</div>
</div>
<div class="section" id="add-subdirectory">
<h2>Add subdirectory<a class="headerlink" href="#add-subdirectory" title="Permalink to this headline">¶</a></h2>
<p>To add a subdirectory to the build, modify the main <em>CMakeList.txt</em> in
the <em>src</em> directory and add the following line :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">&lt;FOLDER_NAME&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>This folder contains a CMakeList.txt file. Example in
src/CMakeList.txt :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">fft</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="add-library">
<h2>Add library<a class="headerlink" href="#add-library" title="Permalink to this headline">¶</a></h2>
<p>To add library to the current CMakeList.txt just add the lines :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">add_library</span><span class="p">(</span><span class="s">&lt;LIBRARY_NAME&gt;</span> <span class="s">STATIC</span> <span class="s">&lt;SOURCE.F90&gt;</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">&lt;LIBRARY_NAME&gt;</span> <span class="s">&lt;LIST_OF_DEPENDENCIES&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;LIST_OF_DEPENDENCIES&gt;</span></code> is a collection of library that is required
to link with build <code class="docutils literal notranslate"><span class="pre">sll_fft</span></code>. Example file <code class="docutils literal notranslate"><span class="pre">src/fft/CMakeList.txt</span></code> :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">add_library</span><span class="p">(</span><span class="s">sll_fft</span> <span class="s">STATIC</span> <span class="s">sll_fft.F90</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">sll_fft</span> <span class="s">sll_working_precision</span> <span class="s">sll_memory</span> <span class="s">sll_assert</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="add-program">
<h2>Add program<a class="headerlink" href="#add-program" title="Permalink to this headline">¶</a></h2>
<p>A program is an executable. In SeLaLib the executable are in build/bin/.
To add executable to the cmake tree add this lines in the current
CMakeList :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">add_executable</span><span class="p">(</span><span class="s">&lt;EXEC_NAME&gt;</span> <span class="s">&lt;FILE_NAME.F90&gt;</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">&lt;EXEC_NAME&gt;</span> <span class="s">&lt;LIBRARY_NAME&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Dependencies should be set for the library but you can add some
dependencies to the program. Example in <code class="docutils literal notranslate"><span class="pre">src/fft/CMakeList.txt</span></code> :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">add_executable</span><span class="p">(</span><span class="s">test_fft</span> <span class="s">test_fft.F90</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">test_fft</span> <span class="s">sll_fft</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="add-test">
<h2>Add test<a class="headerlink" href="#add-test" title="Permalink to this headline">¶</a></h2>
<p>A test is an executable define by <code class="docutils literal notranslate"><span class="pre">add_executable</span></code> that is automaticaly
run by <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code>. Add the following lines to <em>CMakeList.txt</em> :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">add_test</span><span class="p">(</span><span class="s">NAME</span> <span class="s">&lt;TEST_NAME&gt;</span> <span class="s">COMMAND</span> <span class="s">&lt;EXEC_NAME&gt;</span><span class="p">)</span>
<span class="nb">set_tests_properties</span><span class="p">(</span> <span class="s">&lt;TEST_NAME&gt;</span> <span class="s">PROPERTIES</span> <span class="s">PASS_REGULAR_EXPRESSION</span> <span class="s2">&quot;PASSED&quot;</span> <span class="s">TIMEOUT</span> <span class="s">20</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;TEST_NAME&gt;</span></code> is the name that appears when you run make test and
<code class="docutils literal notranslate"><span class="pre">&lt;EXEC_NAME&gt;</span></code> is the name of the executable that you defined. The string
“PASSED” could be changed and if needed, increase the timeout value
(seconds). Example in src/fft/CMakeList.txt :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">add_executable</span><span class="p">(</span><span class="s">test_fft</span> <span class="s">unit_test.F90</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">test_fft</span> <span class="s">sll_fft</span><span class="p">)</span>
<span class="nb">add_test</span><span class="p">(</span><span class="s">NAME</span> <span class="s">fft_unit_test</span> <span class="s">COMMAND</span> <span class="s">test_fft</span><span class="p">)</span>
<span class="nb">set_tests_properties</span><span class="p">(</span> <span class="s">fft_unit_test</span> <span class="s">PROPERTIES</span> 
                   <span class="s">PASS_REGULAR_EXPRESSION</span> <span class="s2">&quot;PASSED&quot;</span> 
                   <span class="s">TIMEOUT</span> <span class="s">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="macro-for-parallel-jobs-is-available">
<h2>Macro for parallel jobs is available<a class="headerlink" href="#macro-for-parallel-jobs-is-available" title="Permalink to this headline">¶</a></h2>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">MACRO</span><span class="p">(</span><span class="s">ADD_MPI_TEST</span> <span class="s">TEST_NAME</span> <span class="s">EXEC_NAME</span> <span class="s">PROCS</span> <span class="s">ARGS</span><span class="p">)</span>
 <span class="nb">ADD_TEST</span><span class="p">(</span><span class="s">NAME</span> <span class="o">${</span><span class="nv">TEST_NAME</span><span class="o">}</span>
  <span class="s">COMMAND</span> <span class="o">${</span><span class="nv">MPIEXEC</span><span class="o">}</span>
   <span class="o">${</span><span class="nv">MPIEXEC_NUMPROC_FLAG</span><span class="o">}</span> <span class="o">${</span><span class="nv">PROCS</span><span class="o">}</span> <span class="o">${</span><span class="nv">MPIEXEC_PREFLAGS</span><span class="o">}</span>
   <span class="o">${</span><span class="nv">CMAKE_RUNTIME_OUTPUT_DIRECTORY</span><span class="o">}</span><span class="s">/</span><span class="o">${</span><span class="nv">EXEC_NAME</span><span class="o">}</span>
   <span class="o">${</span><span class="nv">MPIEXEC_POSTFLAGS</span><span class="o">}</span> <span class="o">${</span><span class="nv">ARGS</span><span class="o">}</span><span class="p">)</span>
<span class="nb">ENDMACRO</span><span class="p">(</span><span class="s">ADD_MPI_TEST</span><span class="p">)</span>
</pre></div>
</div>
<p>Use it with :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">ADD_MPI_TEST</span><span class="p">(</span><span class="s">test-mpi</span> <span class="s">mpi-test-program</span> <span class="s">4</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="running-tests">
<h2>Running Tests<a class="headerlink" href="#running-tests" title="Permalink to this headline">¶</a></h2>
<p>To determine what tests are available, you can always run :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ctest -N
</pre></div>
</div>
<p>which will display the list of tests but not actually run them :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">Test</span> <span class="n">project</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">samuel</span><span class="o">/</span><span class="n">selalib</span><span class="o">/</span><span class="n">build</span>
     <span class="n">Test</span>  <span class="c1">#1: memory</span>
     <span class="n">Test</span>  <span class="c1">#2: assert</span>
     <span class="n">Test</span>  <span class="c1">#3: constants</span>
     <span class="n">Test</span>  <span class="c1">#4: utilities</span>
     <span class="n">Test</span>  <span class="c1">#5: low_level_file_io</span>
     <span class="n">Test</span>  <span class="c1">#6: timer</span>
     <span class="n">Test</span>  <span class="c1">#7: tridiagonal</span>
     <span class="n">Test</span>  <span class="c1">#8: newton_raphson</span>
     <span class="n">Test</span>  <span class="c1">#9: splines</span>
     <span class="n">Test</span> <span class="c1">#10: integration</span>
     <span class="n">Test</span> <span class="c1">#11: fft</span>
     <span class="n">Test</span> <span class="c1">#12: collective</span>
     <span class="n">Test</span> <span class="c1">#13: remap</span>
     <span class="n">Test</span> <span class="c1">#14: WENO</span>
     <span class="n">Test</span> <span class="c1">#15: interpolators</span>
     <span class="n">Test</span> <span class="c1">#16: mapped_meshes</span>
     <span class="n">Test</span> <span class="c1">#17: fields</span>
     <span class="n">Test</span> <span class="c1">#18: ode_solvers</span>
     <span class="n">Test</span> <span class="c1">#19: distribution_function</span>
     <span class="n">Test</span> <span class="c1">#20: advection_field</span>
     <span class="n">Test</span> <span class="c1">#21: poisson_solvers</span>

    <span class="n">Total</span> <span class="n">Tests</span><span class="p">:</span> <span class="mi">21</span>
</pre></div>
</div>
<p>The way of specifying tests is using explicit test number option -I  :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ctest -I <span class="m">3</span>,5
</pre></div>
</div>
<p>will run tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">Test</span> <span class="n">project</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">samuel</span><span class="o">/</span><span class="n">selalib</span><span class="o">/</span><span class="n">build</span>
        <span class="n">Start</span> <span class="mi">3</span><span class="p">:</span> <span class="n">constants</span>
    <span class="mi">1</span><span class="o">/</span><span class="mi">3</span> <span class="n">Test</span> <span class="c1">#3: constants ........................   Passed    0.00 sec</span>
        <span class="n">Start</span> <span class="mi">4</span><span class="p">:</span> <span class="n">utilities</span>
    <span class="mi">2</span><span class="o">/</span><span class="mi">3</span> <span class="n">Test</span> <span class="c1">#4: utilities ........................   Passed    9.09 sec</span>
        <span class="n">Start</span> <span class="mi">5</span><span class="p">:</span> <span class="n">low_level_file_io</span>
    <span class="mi">3</span><span class="o">/</span><span class="mi">3</span> <span class="n">Test</span> <span class="c1">#5: low_level_file_io ................   Passed    0.12 sec</span>

    <span class="mi">100</span><span class="o">%</span> <span class="n">tests</span> <span class="n">passed</span><span class="p">,</span> <span class="mi">0</span> <span class="n">tests</span> <span class="n">failed</span> <span class="n">out</span> <span class="n">of</span> <span class="mi">3</span>

    <span class="n">Total</span> <span class="n">Test</span> <span class="n">time</span> <span class="p">(</span><span class="n">real</span><span class="p">)</span> <span class="o">=</span>   <span class="mf">9.38</span> <span class="n">sec</span>
</pre></div>
</div>
<p>Run only the test 3.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ctest -I <span class="m">3</span>,3 
</pre></div>
</div>
<p>If we now run :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ctest -R field
</pre></div>
</div>
<p>We will only see tests that contain string field :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">Test</span> <span class="n">project</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">samuel</span><span class="o">/</span><span class="n">selalib</span><span class="o">/</span><span class="n">build</span>

        <span class="n">Start</span> <span class="mi">17</span><span class="p">:</span> <span class="n">fields</span>
    <span class="mi">1</span><span class="o">/</span><span class="mi">2</span> <span class="n">Test</span> <span class="c1">#17: fields ...........................   Passed    0.00 sec</span>
        <span class="n">Start</span> <span class="mi">20</span><span class="p">:</span> <span class="n">advection_field</span>
    <span class="mi">2</span><span class="o">/</span><span class="mi">2</span> <span class="n">Test</span> <span class="c1">#20: advection_field ..................   Passed    0.01 sec</span>

    <span class="mi">100</span><span class="o">%</span> <span class="n">tests</span> <span class="n">passed</span><span class="p">,</span> <span class="mi">0</span> <span class="n">tests</span> <span class="n">failed</span> <span class="n">out</span> <span class="n">of</span> <span class="mi">2</span>

    <span class="n">Total</span> <span class="n">Test</span> <span class="n">time</span> <span class="p">(</span><span class="n">real</span><span class="p">)</span> <span class="o">=</span>   <span class="mf">0.15</span> <span class="n">sec</span>
</pre></div>
</div>
<p>We can also omit tests using -E, for example :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ctest -E field
</pre></div>
</div>
<p>will produce :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">Test</span> <span class="n">project</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">samuel</span><span class="o">/</span><span class="n">selalib</span><span class="o">/</span><span class="n">build</span>
          <span class="n">Start</span>  <span class="mi">1</span><span class="p">:</span> <span class="n">memory</span>
     <span class="mi">1</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span>  <span class="c1">#1: memory ........................... Passed    0.81 sec</span>
          <span class="n">Start</span>  <span class="mi">2</span><span class="p">:</span> <span class="k">assert</span>
     <span class="mi">2</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span>  <span class="c1">#2: assert ........................... Passed    0.09 sec</span>
          <span class="n">Start</span>  <span class="mi">3</span><span class="p">:</span> <span class="n">constants</span>
     <span class="mi">3</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span>  <span class="c1">#3: constants ........................ Passed    0.00 sec</span>
          <span class="n">Start</span>  <span class="mi">4</span><span class="p">:</span> <span class="n">utilities</span>
     <span class="mi">4</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span>  <span class="c1">#4: utilities ........................ Passed    9.00 sec</span>
          <span class="n">Start</span>  <span class="mi">5</span><span class="p">:</span> <span class="n">low_level_file_io</span>
     <span class="mi">5</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span>  <span class="c1">#5: low_level_file_io ................ Passed    0.44 sec</span>
          <span class="n">Start</span>  <span class="mi">6</span><span class="p">:</span> <span class="n">timer</span>
     <span class="mi">6</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span>  <span class="c1">#6: timer ............................ Passed    2.00 sec</span>
          <span class="n">Start</span>  <span class="mi">7</span><span class="p">:</span> <span class="n">tridiagonal</span>
     <span class="mi">7</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span>  <span class="c1">#7: tridiagonal ...................... Passed    0.02 sec</span>
          <span class="n">Start</span>  <span class="mi">8</span><span class="p">:</span> <span class="n">newton_raphson</span>
     <span class="mi">8</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span>  <span class="c1">#8: newton_raphson ................... Passed    0.02 sec</span>
          <span class="n">Start</span>  <span class="mi">9</span><span class="p">:</span> <span class="n">splines</span>
     <span class="mi">9</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span>  <span class="c1">#9: splines .......................... Passed    0.01 sec</span>
          <span class="n">Start</span> <span class="mi">10</span><span class="p">:</span> <span class="n">integration</span>
    <span class="mi">10</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span> <span class="c1">#10: integration ...................... Passed    0.00 sec</span>
          <span class="n">Start</span> <span class="mi">11</span><span class="p">:</span> <span class="n">fft</span>
    <span class="mi">11</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span> <span class="c1">#11: fft .............................. Passed    0.13 sec</span>
          <span class="n">Start</span> <span class="mi">12</span><span class="p">:</span> <span class="n">collective</span>
    <span class="mi">12</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span> <span class="c1">#12: collective ....................... Passed    1.35 sec</span>
          <span class="n">Start</span> <span class="mi">13</span><span class="p">:</span> <span class="n">remap</span>
    <span class="mi">13</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span> <span class="c1">#13: remap ............................ Passed    1.83 sec</span>
          <span class="n">Start</span> <span class="mi">14</span><span class="p">:</span> <span class="n">WENO</span>
    <span class="mi">14</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span> <span class="c1">#14: WENO ............................. Passed    0.00 sec</span>
          <span class="n">Start</span> <span class="mi">15</span><span class="p">:</span> <span class="n">interpolators</span>
    <span class="mi">15</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span> <span class="c1">#15: interpolators .................... Passed    0.00 sec</span>
          <span class="n">Start</span> <span class="mi">16</span><span class="p">:</span> <span class="n">mapped_meshes</span>
    <span class="mi">16</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span> <span class="c1">#16: mapped_meshes .................... Passed    0.01 sec</span>
          <span class="n">Start</span> <span class="mi">17</span><span class="p">:</span> <span class="n">ode_solvers</span>
    <span class="mi">17</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span> <span class="c1">#17: ode_solvers ...................... Passed    0.00 sec</span>
          <span class="n">Start</span> <span class="mi">18</span><span class="p">:</span> <span class="n">distribution_function</span>
    <span class="mi">18</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span> <span class="c1">#18: distribution_function ............ Passed    0.02 sec</span>
          <span class="n">Start</span> <span class="mi">19</span><span class="p">:</span> <span class="n">poisson_solvers</span>
    <span class="mi">19</span><span class="o">/</span><span class="mi">19</span> <span class="n">Test</span> <span class="c1">#19: poisson_solvers .................. Passed    0.00 sec</span>

    <span class="mi">100</span><span class="o">%</span> <span class="n">tests</span> <span class="n">passed</span><span class="p">,</span> <span class="mi">0</span> <span class="n">tests</span> <span class="n">failed</span> <span class="n">out</span> <span class="n">of</span> <span class="mi">19</span>

    <span class="n">Total</span> <span class="n">Test</span> <span class="n">time</span> <span class="p">(</span><span class="n">real</span><span class="p">)</span> <span class="o">=</span>  <span class="mf">15.78</span> <span class="n">sec</span>
</pre></div>
</div>
</div>
<div class="section" id="selecting-compiler-and-linker-options">
<h2>Selecting compiler and linker options<a class="headerlink" href="#selecting-compiler-and-linker-options" title="Permalink to this headline">¶</a></h2>
<p>You can configure to build with default debug or release compiler flags.</p>
<ul class="simple">
<li><p>To build a debug version, pass into ‘cmake’ :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>          <span class="o">-</span><span class="n">D</span> <span class="n">CMAKE_BUILD_TYPE</span><span class="o">=</span><span class="n">Debug</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>This will result in default debug flags getting passed to the
compiler.
</pre></div>
</div>
<ul class="simple">
<li><p>To build a release (optimized) version, pass into ‘cmake’ :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>          <span class="o">-</span><span class="n">D</span> <span class="n">CMAKE_BUILD_TYPE</span><span class="o">=</span><span class="n">Release</span>
</pre></div>
</div>
<ul class="simple">
<li><p>MPI is enabled by default, to disable the support you must
minimally :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>          <span class="o">-</span><span class="n">D</span> <span class="n">MPI_ENABLED</span><span class="o">=</span><span class="n">OFF</span>
</pre></div>
</div>
<ul class="simple">
<li><p>To enable OpenMP support you must set :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>          <span class="o">-</span><span class="n">D</span> <span class="n">OPENMP_ENABLED</span><span class="o">=</span><span class="n">ON</span>
</pre></div>
</div>
<ul class="simple">
<li><p>To enable Parallel HDF5 support you must set :</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>          <span class="o">-</span><span class="n">D</span> <span class="n">HDF5_PARALLEL_ENABLED</span><span class="o">=</span><span class="n">ON</span>
</pre></div>
</div>
<hr class="footnotes docutils" />
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><a class="reference external" href="http://www.cmake.org/cmake/resources/software.html">http://www.cmake.org/cmake/resources/software.html</a></p>
</dd>
</dl>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="getting_started.html" title="previous page">Getting Started</a>
    <a class='right-next' id="next-link" href="structure.html" title="next page">Libraries</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The SeLaLib project team<br/>
        
            &copy; Copyright 2020.<br/>
          Last updated on 10 Mar 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>